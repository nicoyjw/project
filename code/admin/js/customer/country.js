Ext.ux.CountryGrid=Ext.extend(Ext.ux.NormalGrid,{initComponent:function(){Ext.ux.CountryGrid.superclass.initComponent.call(this);},createStore:function(){this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:this.listURL}),pruneModifiedRecords:true,reader:new Ext.data.JsonReader({root:'topics',totalProperty:'totalCount',id:this.fields[0]},this.fields)});this.store.load({params:{start:0,limit:this.pagesize},scope:this.store});this.store.on('beforeload',function(){Ext.apply(this.baseParams,{keyword:Ext.get('keyword').dom.value});});},createTbar:function(){this.tbar=[{text:'创建',iconCls:'x-tbar-add',handler:this.createRecord.createDelegate(this)},{text:'编辑',iconCls:'x-tbar-update',ref:'../editBtn',disabled:true,handler:this.updateRecord.createDelegate(this)},{text:'删除',iconCls:'x-tbar-del',ref:'../removeBtn',disabled:true,handler:this.removeRecord.createDelegate(this)},'->','搜索:',{xtype:'textfield',id:'keyword',enableKeyEvents:true,listeners:{scope:this,keypress:function(field,e){if(e.getKey()==13){this.store.load({params:{start:0,limit:10,keyword:Ext.get('keyword').dom.value}});}}}}];},createColumns:function(){var cols=[{header:'英文国家名',width:250,dataIndex:'country'},{header:'中文国家名',width:250,dataIndex:'cn_country'},{header:'国家代码',dataIndex:'code'}];this.columns=cols;},createFormtiems:function(){var items=[{xtype:'hidden',name:this.fields[0]}];for(var i=1;i<this.fields.length;i++){var f=this.fields[i];var h=this.headers[i];items.push({fieldLabel:h,name:f,allowBlank:false,width:180});}
this.formitem=items;}});